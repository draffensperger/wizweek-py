{"version":3,"sources":["scripts/app.js"],"names":["angular","module","WelcomeController","auth","vm","this","$inject","component","controller","controllerAs","templateUrl","settingsStore","$q","$window","api","save","value","put","load","settings","resolve","get","then","resp","extend","defaultSettings","data","parseDates","workStartTimes","workEndTimes","values","i","length","Date","appointmentsCalId","tasksCalId","Array","fill","concat","service","SettingsController","GApi","$log","toastr","activate","loadCalendars","loadSettings","loadedSettings","saveSettings","success","request","path","calendars","result","items","debug","weekDays","todoApi","$resource","apiBaseUrl","store","todos","query","headers","Authorization","token","isArray","delete","method","update","clearCompleted","originalTodos","slice","incompleteTodos","filter","todo","completed","copy","splice","indexOf","id","$promise","insert","push","factory","lastSignIn","signedIn","expiresAt","localStorage","signedInBefore","signedOut","isLikelyActive","GAuth","gapiScopes","gapiClientId","$state","$rootScope","currentUserChanged","user","signingIn","isSignedIn","userEmail","getBasicProfile","getEmail","userName","getName","getAuthResponse","access_token","expires_at","$digest","checkAuth","signIn","signOut","setConfig","clientId","scope","currentUserListener","apiPing","optimizeApi","ping","$http","url","optimizer","exec","tasks","tasksCalInfo","appointments","start","end","timeZone","weeklyTaskBlocks","settingsTaskBlocks","map","formatAppointment","formatTask","startTaskSchedule","toISOString","endTaskSchedule","optimize","appointment","title","summary","dateTime","task","formatted","estimatedHours","parseFloat","hours","reward","deadline","minStart","startOnOrAfter","taskBlocks","DAYS_IN_WEEK","getTime","hoursAndMinutes","date","getHours","getMinutes","optimizeUrl","post","response","optimizeAndSync","gcal","eventSync","msgCallback","doneCallback","loadEvents","loadAppointments","taskEventsPromise","events","scheduleStart","scheduleEnd","apptsPromise","infoPromise","calendarInfo","all","results","rejectAllDayEvents","runOptimizer","optimizePromise","currentEvents","optimizedEvents","syncEvents","curTime","getFullYear","getMonth","getDate","setDate","calId","timeMin","timeMax","calPath","eventUpdatesBatch","eventUpdates","requests","body","batch","isNotAllDayEvent","event","oldEvents","newTasks","len","eventAndTaskMatch","updateRequest","createRequest","k","deleteRequest","oldEvent","newTask","taskData","dateStrsMatch","str1","str2","NavbarController","isActive","state","current","name","MainController","AuthorizedController","FooterController","directive","$timeout","elem","attrs","$watch","todoFocus","newVal","focus","ESCAPE_KEY","bind","keyCode","$apply","todoEscape","$on","unbind","TodoController","$filter","settingsLoading","forEach","blankNewTodo","optimizing","optimizeMessage","message","deadlinePopupOpen","deadlineFocused","minStartPopupOpen","minStartFocused","newTodo","editedTodo","addTodo","trim","saving","editTodo","originalTodo","saveEdits","saveEvent","reverted","revertEdits","removeTodo","saveTodo","toggleCompleted","isDefined","clearCompletedTodos","markAll","conf","config","init","auth2","getAuthInstance","initialized","client_id","currentUser","listen","cachedAuth2","gapi","$document","client","newBatch","req","add","args","gapiLoaded","when","deferred","defer","observerCallbacks","gapiLoading","loadWithClientAndAuth","c","promise","loadScript","URL","_gapiOnLoad","script","createElement","onerror","e","reject","src","appendChild","runBlock","run","routerConfig","$stateProvider","$urlRouterProvider","abstract","otherwise","constant","malarkey","moment","$logProvider","toastrConfig","debugEnabled","allowHtml","timeOut","positionClass","preventDuplicates","progressBar","preventOpenDuplicates","maxOpened","$templateCache"],"mappings":"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","file":"scripts/app-12b92b3e15.js","sourcesContent":["(function() {\n  'use strict';\n\n  // This module is empty except for the template cache that's used in\n  // production.\n  angular\n    .module('wizweekTemplates', [])\n\n  angular\n    .module('wizweekPy', [\n      'ngAnimate', 'ngCookies', 'ngTouch', 'ngSanitize', 'ngMessages', 'ngAria',\n      'ngResource', 'ui.router', 'ui.bootstrap', 'toastr',\n      'angularSpinner', 'wizweekTemplates'\n    ]);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n  .module('wizweekPy')\n  .component('wwWelcome', {\n    controller: WelcomeController,\n    controllerAs: 'welcome',\n    templateUrl: 'app/welcome/welcome.html'\n  });\n\n  /** @ngInject */\n  function WelcomeController(auth) {\n    var vm = this;\n    vm.auth = auth;\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n  .module('wizweekPy')\n  .service('settingsStore', settingsStore);\n\n  /** @ngInject */\n  function settingsStore($q, $window, api) {\n    var settings = null;\n\n    var defaultSettings = {\n      appointmentsCalId: null, tasksCalId: null,\n\n      // Default work times are 9am-5pm Mon-Fri and just an empty 9am-9am for\n      // Sun (first day of week) and Sat (last day of week).\n      workStartTimes: Array(7).fill(new Date(0, 0, 0, 9)),\n      workEndTimes: [new Date(0, 0, 0, 9)].concat(\n        Array(5).fill(new Date(0, 0, 0, 17))).concat(\n        [new Date(0, 0, 0, 9)])\n    }\n\n    var service = {\n      load: load,\n      save: save\n    }\n    return service;\n\n    function save(value) {\n      return api.put('settings', value);\n    }\n\n    function load() {\n      if (settings) {\n        // If we've already loaded the settings once, just give that.\n        return $q.resolve(settings);\n      } else {\n        return api.get('settings').then(function(resp) {\n          // If the loaded settings lack any of the settings attributes, we will\n          // get them from the default settings.\n          settings = angular.extend({}, defaultSettings, resp.data);\n          parseDates(settings.workStartTimes);\n          parseDates(settings.workEndTimes);\n          return settings;\n        });\n      }\n    }\n\n    function parseDates(values) {\n      for (var i = 0; i < values.length; i++) {\n        values[i] = new Date(values[i]);\n      }\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n  .module('wizweekPy')\n  .controller('SettingsController', SettingsController);\n\n  /** @ngInject */\n  function SettingsController(GApi, $log, settingsStore, toastr) {\n    var vm = this;\n    vm.calendars = [];\n    vm.weekDays = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];\n\n    vm.settings = {};\n    vm.saveSettings = saveSettings;\n\n    activate();\n\n    function activate() {\n      loadCalendars();\n      loadSettings();\n    }\n\n    function loadSettings() {\n      settingsStore.load().then(function(loadedSettings) {\n        vm.settings = loadedSettings;\n      });\n    }\n\n    function saveSettings() {\n      settingsStore.save(vm.settings).then(function() {\n        toastr.success('Settings saved!');\n      });\n    }\n\n    function loadCalendars() {\n      GApi.request({\n        path: '/calendar/v3/users/me/calendarList'\n      }).then(\n        function(resp) {\n          vm.calendars = resp.result.items;\n        },\n        function() {\n          vm.calendars = [];\n          $log.debug('Calendar call failed!');\n        }\n      );\n    }\n  }\n})();\n\n/*global angular */\n\n/**\n * Services that persists and retrieves todos from localStorage or a backend API\n * if available.\n *\n * They both follow the same API, returning promises for all changes to the\n * model.\n */\n(function() {\n  'use strict';\n\n  angular.module('wizweekPy')\n\t.factory('todoApi', todoApi);\n\n  /** @ngInject */\n  function todoApi($resource, auth, apiBaseUrl) {\n\t\tvar store = {\n\t\t\ttodos: [],\n\n\t\t\tapi: $resource(apiBaseUrl + 'tasks/:id', null,\n\t\t\t\t{\n          query: {\n            headers: { 'Authorization': 'Bearer ' + auth.token },\n            isArray: true\n          },\n          delete: {\n            method: 'DELETE',\n            headers: { 'Authorization': 'Bearer ' + auth.token }\n          },\n          save: {\n            method:'POST',\n            headers: { 'Authorization': 'Bearer ' + auth.token }\n          },\n          update: {\n            method:'PUT',\n            headers: { 'Authorization': 'Bearer ' + auth.token }\n          }\n\t\t\t\t}\n\t\t\t),\n\n\t\t\tclearCompleted: function () {\n\t\t\t\tvar originalTodos = store.todos.slice(0);\n\n\t\t\t\tvar incompleteTodos = store.todos.filter(function (todo) {\n\t\t\t\t\treturn !todo.completed;\n\t\t\t\t});\n\n\t\t\t\tangular.copy(incompleteTodos, store.todos);\n\n\t\t\t\treturn store.api.delete(function () {\n\t\t\t\t\t}, function error() {\n\t\t\t\t\t\tangular.copy(originalTodos, store.todos);\n\t\t\t\t\t});\n\t\t\t},\n\n\t\t\tdelete: function (todo) {\n\t\t\t\tvar originalTodos = store.todos.slice(0);\n\n\t\t\t\tstore.todos.splice(store.todos.indexOf(todo), 1);\n\t\t\t\treturn store.api.delete({ id: todo.id },\n\t\t\t\t\tfunction () {\n\t\t\t\t\t}, function error() {\n\t\t\t\t\t\tangular.copy(originalTodos, store.todos);\n\t\t\t\t\t});\n\t\t\t},\n\n\t\t\tget: function () {\n\t\t\t\treturn store.api.query().$promise;\n\t\t\t},\n\n\t\t\tinsert: function (todo) {\n\t\t\t\tvar originalTodos = store.todos.slice(0);\n\n\t\t\t\treturn store.api.save(todo,\n\t\t\t\t\tfunction success(resp) {\n\t\t\t\t\t\ttodo.id = resp.id;\n\t\t\t\t\t\tstore.todos.push(todo);\n\t\t\t\t\t}, function error() {\n\t\t\t\t\t\tangular.copy(originalTodos, store.todos);\n\t\t\t\t\t})\n\t\t\t\t\t.$promise;\n\t\t\t},\n\n\t\t\tput: function (todo) {\n\t\t\t\treturn store.api.update({ id: todo.id }, todo)\n\t\t\t\t\t.$promise;\n\t\t\t}\n\t\t};\n\n\t\treturn store;\n\t}\n})();\n\n\n(function() {\n  'use strict';\n\n  angular\n  .module('wizweekPy')\n  .service('lastSignIn', lastSignIn);\n\n  /** @ngInject */\n  function lastSignIn($window) {\n    var service = {\n      isLikelyActive: isLikelyActive,\n      signedIn: signedIn,\n      signedOut: signedOut\n    }\n    return service;\n\n    function signedIn(expiresAt) {\n      // Because Google saves logins over time (and refreshes them), just assume\n      // for now that if we get a sign in, just ignore the expiresAt parameter.\n      // We may as well store it anyway but it's only used for its truthy value.\n      $window.localStorage.signedInBefore = 'true';\n    }\n\n    function signedOut() {\n      $window.localStorage.signedInBefore = 'false';\n    }\n\n    function isLikelyActive() {\n      // Coerce the truthy/falsey value of signedInBefore to actual true/false\n      return $window.localStorage.signedInBefore == 'true';\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n  .module('wizweekPy')\n  .service('auth', auth);\n\n  /** @ngInject */\n  function auth(GAuth, gapiScopes, gapiClientId, $state, $rootScope, lastSignIn) {\n    GAuth.setConfig({\n      clientId: gapiClientId,\n      scope: gapiScopes,\n      currentUserListener: currentUserChanged\n    });\n\n    var service = {\n      checkAuth: checkAuth,\n      signIn: signIn,\n      signOut: signOut,\n      signedIn: false,\n      signingIn: false,\n      userEmail: null,\n      userName: null,\n      token: null\n    }\n    return service;\n\n    function currentUserChanged(user) {\n      service.signingIn = false;\n      service.signedIn = user.isSignedIn();\n      if (service.signedIn) {\n        service.userEmail = user.getBasicProfile().getEmail();\n        service.userName = user.getBasicProfile().getName();\n        service.token = user.getAuthResponse().access_token;\n        lastSignIn.signedIn(user.getAuthResponse().expires_at);\n      } else {\n        service.userEmail = null;\n        service.userName = null;\n        service.token = null;\n        lastSignIn.signedOut();\n      }\n      $rootScope.$digest();\n    }\n\n    function checkAuth() {\n      GAuth.checkAuth();\n    }\n\n    function signIn() {\n      service.signingIn = true;\n      GAuth.signIn();\n    }\n\n    function signOut() {\n      GAuth.signOut().then(function() {\n        service.userEmail = null;\n        service.userName = null;\n        service.token = null;\n        service.signedIn = false;\n        lastSignIn.signedOut();\n      });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('wizweekPy')\n    .service('apiPing', apiPing);\n\n  /** @ngInject */\n  function apiPing(api, optimizeApi) {\n    var service = {\n      ping: ping\n    };\n    return service;\n\n    function ping() {\n      api.get('/');\n      optimizeApi.ping();\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n  .module('wizweekPy')\n  .service('api', api);\n\n  /** @ngInject */\n  function api(apiBaseUrl, auth, $http) {\n    var service = {\n      ping: ping,\n      put: put,\n      get: get,\n      request: request\n    };\n    return service;\n\n    // This is helpful since I currently run the API on a free heroku dyno\n    // (so this ping call will wake up the API when the app is first loaded).\n    function ping() {\n      get('');\n    }\n\n    function get(url) {\n      return request('GET', url);\n    }\n\n    function put(url, data) {\n      return request('PUT', url, data);\n    }\n\n    function request(method, url, data) {\n      return $http({\n        method: method,\n        url: apiBaseUrl + url,\n        data: data,\n        headers: { 'Authorization': 'Bearer ' + auth.token }\n      });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('wizweekPy')\n    .service('optimizer', optimizer);\n\n  /** @ngInject */\n  function optimizer(optimizeApi) {\n    var DAYS_IN_WEEK = 7;\n\n    this.exec = exec;\n\n    function exec(tasks, tasksCalInfo, settings, appointments, start, end) {\n      var request = {\n        timeZone: tasksCalInfo.timeZone,\n        weeklyTaskBlocks: settingsTaskBlocks(settings),\n        appointments: appointments.map(formatAppointment),\n        tasks: tasks.map(formatTask),\n        startTaskSchedule: start.toISOString(),\n        endTaskSchedule: end.toISOString()\n      };\n      return optimizeApi.optimize(request);\n    }\n\n    function formatAppointment(appointment) {\n      return {\n        title: appointment.summary,\n        start: appointment.start.dateTime,\n        end: appointment.end.dateTime\n      };\n    }\n\n    function formatTask(task) {\n      var formatted = {\n        title: task.title,\n        estimatedHours: parseFloat(task.hours),\n        reward: parseFloat(task.value)\n      };\n      if (task.deadline) {\n        formatted.deadline = task.deadline;\n      }\n      if (task.minStart) {\n        formatted.startOnOrAfter = task.minStart;\n      }\n      return formatted;\n    }\n\n    function settingsTaskBlocks(settings) {\n      var taskBlocks = [];\n      for (var i = 0; i < DAYS_IN_WEEK; i++) {\n        var start = settings.workStartTimes[i];\n        var end = settings.workEndTimes[i];\n        if (start.getTime() == end.getTime()) {\n          taskBlocks.push([]);\n        } else {\n          taskBlocks.push([{\n            start: hoursAndMinutes(start), end: hoursAndMinutes(end)\n          }]);\n        }\n      }\n      return taskBlocks;\n    }\n\n    function hoursAndMinutes(date) {\n      return date.getHours() + ':' + date.getMinutes();\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('wizweekPy')\n    .service('optimizeApi', optimizeApi);\n\n  /** @ngInject */\n  function optimizeApi(optimizeUrl, $http) {\n    var service = {\n      ping: ping,\n      optimize: optimize\n    };\n    return service;\n\n    function ping() {\n      return $http.get(optimizeUrl);\n    }\n\n    function optimize(request) {\n      return $http.post(optimizeUrl, request).then(function(response) {\n        return response.data;\n      });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n  .module('wizweekPy')\n  .service('optimizeAndSync', optimizeAndSync);\n\n  /** @ngInject */\n  function optimizeAndSync(gcal, settingsStore, optimizer, $q, eventSync) {\n    var service = {\n      exec: exec\n    };\n    return service;\n\n    function exec(tasks, msgCallback, doneCallback) {\n      var settings, appointments, tasksCalInfo, optimizedEvents, currentEvents;\n      var taskEventsPromise, optimizePromise;\n\n      var curTime = new Date();\n      var scheduleStart = new Date(\n        curTime.getFullYear(), curTime.getMonth(), curTime.getDate(),\n        curTime.getHours() + 1\n      );\n      var scheduleEnd = new Date(scheduleStart);\n      scheduleEnd.setDate(scheduleStart.getDate() + 90);\n\n      loadSettings();\n\n      function loadSettings() {\n        msgCallback('Loading settings...');\n        settingsStore.load().then(function(loadedSettings) {\n          settings = loadedSettings;\n          loadEvents();\n        });\n      }\n\n      function loadEvents() {\n        loadAppointments();\n\n        // Start loading the task events for the range right away, but also\n        // track its promoise so we can wait until it's done.\n        taskEventsPromise = gcal.events(\n          settings.tasksCalId, scheduleStart, scheduleEnd\n        );\n      }\n\n      function loadAppointments() {\n        msgCallback('Loading appointments...');\n        var apptsPromise =\n          gcal.events(settings.appointmentsCalId, scheduleStart, scheduleEnd);\n\n        var infoPromise = gcal.calendarInfo(settings.tasksCalId);\n\n        $q.all([apptsPromise, infoPromise]).then(function(results) {\n          appointments = gcal.rejectAllDayEvents(results[0]);\n          tasksCalInfo = results[1];\n          runOptimizer();\n        });\n      }\n\n      function runOptimizer() {\n        msgCallback('Running optimizer...');\n        optimizePromise = optimizer.exec(\n          tasks, tasksCalInfo, settings, appointments, scheduleStart, scheduleEnd\n        );\n        $q.all([taskEventsPromise, optimizePromise]).then(function(results) {\n          currentEvents = results[0];\n          optimizedEvents = results[1];\n          syncEvents();\n        }, function() {\n          msgCallback('No feasible schedule found. Please check your tasks.');\n          doneCallback();\n        });\n      }\n\n      function syncEvents() {\n        msgCallback('Syncing events to tasks calendar...');\n        eventSync.syncEvents(settings.tasksCalId, currentEvents, optimizedEvents).\n          then(function() {\n            msgCallback('Optimized schedule has been synced to your tasks calendar.');\n            doneCallback();\n          });\n      }\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n  .module('wizweekPy')\n  .service('gcal', gcal);\n\n  function gcal(GApi) {\n    var service = {\n      calendarInfo: calendarInfo,\n      events: events,\n      eventUpdatesBatch: eventUpdatesBatch,\n      rejectAllDayEvents: rejectAllDayEvents\n    };\n    return service;\n\n    function events(calId, timeMin, timeMax) {\n      var path = calPath(calId) + \"/events?timeMin=\" + timeMin.toISOString() +\n        \"&timeMax=\" + timeMax.toISOString();\n\n      return GApi.request(path).then(function(resp) {\n        return resp.result.items;\n      });\n    }\n\n    function eventUpdatesBatch(calId, eventUpdates) {\n      var requests = eventUpdates.map(function(update) {\n        var path = calPath(calId) + '/events';\n        if (update.id) {\n          path += '/' + update.id;\n        }\n        return { path: path, method: update.method, body: update.data };\n      });\n      return GApi.batch(requests);\n    }\n\n    function calendarInfo(calId) {\n      return GApi.request(calPath(calId)).then(function(resp) {\n        return resp.result;\n      });\n    }\n\n    function calPath(calId) {\n      return 'calendar/v3/calendars/' + calId;\n    }\n\n    function rejectAllDayEvents(events) {\n      return events.filter(isNotAllDayEvent, events);\n    }\n\n    function isNotAllDayEvent(event) {\n      return event['start']['dateTime'];\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n  .module('wizweekPy')\n  .service('eventSync', eventSync);\n\n  /** @ngInject */\n  function eventSync(gcal) {\n    var service = {\n      syncEvents: syncEvents\n    };\n    return service;\n\n    // Note that the oldEvents and newTasks have slightly different formats.\n    // This is due to the fact that oldEvents comes from the Google calendar\n    // api, whereas newTasks comes from the schedule optimizer service.\n    function syncEvents(tasksCalId, oldEvents, newTasks) {\n      var requests = [];\n      for (var i = 0, len = newTasks.length; i < len; i++) {\n        if (i < oldEvents.length) {\n          if (!eventAndTaskMatch(oldEvents[i], newTasks[i])) {\n            requests.push(updateRequest(oldEvents[i], newTasks[i]));\n          }\n        } else {\n          requests.push(createRequest(newTasks[i]));\n        }\n      }\n      for (var k = newTasks.length; k < oldEvents.length; k++) {\n        requests.push(deleteRequest(oldEvents[k]));\n      }\n\n      return gcal.eventUpdatesBatch(tasksCalId, requests);\n    }\n\n    function updateRequest(oldEvent, newTask) {\n      return { method: 'PUT', id: oldEvent.id, data: taskData(newTask) };\n    }\n\n    function createRequest(newTask) {\n      return { method: 'POST', data: taskData(newTask) };\n    }\n\n    function deleteRequest(oldEvent) {\n      return { method: 'DELETE', id: oldEvent.id };\n    }\n\n    function taskData(newTask) {\n      return {\n        summary: newTask.title, start: { dateTime: newTask.start },\n        end: { dateTime: newTask.end }\n      };\n    }\n\n    function eventAndTaskMatch(oldEvent, newTask) {\n      return oldEvent.summary == newTask.title &&\n        dateStrsMatch(oldEvent.start.dateTime, newTask.start) &&\n          dateStrsMatch(oldEvent.end.dateTime, newTask.end);\n    }\n\n    function dateStrsMatch(str1, str2) {\n      return new Date(str1).getTime() == new Date(str2).getTime();\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n  .module('wizweekPy')\n  .component('wwNavbar', {\n    controller: NavbarController,\n    controllerAs: 'navbar',\n    templateUrl: 'app/navbar/navbar.html'\n  });\n\n  /** @ngInject */\n  function NavbarController(auth, lastSignIn, $state) {\n    var vm = this;\n    vm.auth = auth;\n    vm.lastSignIn = lastSignIn;\n    vm.isActive = isActive;\n    vm.state = $state;\n\n    function isActive(state) {\n      return $state.current.name == state;\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n  .module('wizweekPy')\n  .controller('MainController', MainController);\n\n  /** @ngInject */\n  function MainController() {\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n  .module('wizweekPy')\n  .controller('AuthorizedController', AuthorizedController);\n\n  /** @ngInject */\n  function AuthorizedController(auth, lastSignIn) {\n    var vm = this;\n    vm.auth = auth;\n    vm.lastSignIn = lastSignIn;\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n  .module('wizweekPy')\n  .component('wwFooter', {\n    controller: FooterController,\n    controllerAs: 'footer',\n    templateUrl: 'app/footer/footer.html'\n  });\n\n  /** @ngInject */\n  function FooterController() {\n  }\n})();\n\n/*global angular */\n\n/**\n * Directive that places focus on the element it is applied to when the\n * expression it binds to evaluates to true\n */\nangular.module('wizweekPy')\n\t.directive('todoFocus', function todoFocus($timeout) {\n\t\t'use strict';\n\n\t\treturn function (scope, elem, attrs) {\n\t\t\tscope.$watch(attrs.todoFocus, function (newVal) {\n\t\t\t\tif (newVal) {\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\telem[0].focus();\n\t\t\t\t\t}, 0, false);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t});\n\n/*global angular */\n\n/**\n * Directive that executes an expression when the element it is applied to gets\n * an `escape` keydown event.\n */\nangular.module('wizweekPy')\n\t.directive('todoEscape', function () {\n\t\t'use strict';\n\n\t\tvar ESCAPE_KEY = 27;\n\n\t\treturn function (scope, elem, attrs) {\n\t\t\telem.bind('keydown', function (event) {\n\t\t\t\tif (event.keyCode === ESCAPE_KEY) {\n\t\t\t\t\tscope.$apply(attrs.todoEscape);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tscope.$on('$destroy', function () {\n\t\t\t\telem.unbind('keydown');\n\t\t\t});\n\t\t};\n\t});\n\n/**\n * The main controller for the app. The controller:\n * - retrieves and persists the model via the todoStorage service\n * - exposes the model to the template and provides event handlers\n */\n\n(function() {\n  'use strict';\n\n  angular.module('wizweekPy')\n  .controller('TodoController', TodoController);\n\n  /** @ngInject */\n  function TodoController($filter, todoApi, optimizeAndSync, settingsStore, $timeout) {\n\t\t'use strict';\n\n    var vm = this;\n\n    vm.settings = {};\n    vm.settingsLoading = true;\n    settingsStore.load().then(function(loadedSettings) {\n      vm.settings = loadedSettings;\n      vm.settingsLoading = false;\n    })\n\n    todoApi.get().then(function(todos) {\n      todos.forEach(function(todo) {\n        if (todo.deadline) { todo.deadline = new Date(todo.deadline) };\n        if (todo.minStart) { todo.minStart = new Date(todo.minStart) };\n      });\n      vm.todos = todos;\n    });\n\n\t\tvar todos = vm.todos = todoApi.todos;\n\n    var blankNewTodo = {\n      title: '', hours: null, value: null, deadline: null, minStart: null\n    }\n\n    vm.optimizing = false;\n    vm.optimizeMessage = '';\n    vm.optimize = function() {\n      vm.optimizing = true;\n      optimizeAndSync.exec(vm.todos, function(message) {\n        vm.optimizeMessage = message;\n      }, function() {\n        $timeout(function() { vm.optimizing = false; }, 100);\n      });\n    };\n\n    vm.deadlinePopupOpen = false;\n    vm.deadlineFocused = function() {\n      vm.deadlinePopupOpen = true;\n    }\n\n    vm.minStartPopupOpen = false;\n    vm.minStartFocused = function() {\n      vm.minStartPopupOpen = true;\n    }\n\n    vm.newTodo = angular.extend({}, blankNewTodo);\n\t\tvm.editedTodo = null;\n\n\t\tvm.addTodo = function() {\n\t\t\tvar newTodo = {\n\t\t\t\ttitle: vm.newTodo.title.trim(),\n        hours: vm.newTodo.hours,\n        value: vm.newTodo.value,\n        deadline: vm.newTodo.deadline,\n        minStart: vm.newTodo.minStart,\n\t\t\t\tcompleted: false\n\t\t\t};\n\n\t\t\tif (!newTodo.title || !newTodo.hours || !newTodo.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvm.saving = true;\n\t\t\ttodoApi.insert(newTodo)\n\t\t\t\t.then(function success() {\n\t\t\t\t\tvm.newTodo = angular.extend({}, blankNewTodo);\n\t\t\t\t})\n\t\t\t\t.finally(function () {\n\t\t\t\t\tvm.saving = false;\n\t\t\t\t});\n\t\t};\n\n\t\tvm.editTodo = function (todo) {\n\t\t\tvm.editedTodo = todo;\n\t\t\t// Clone the original todo to restore it on demand.\n\t\t\tvm.originalTodo = angular.extend({}, todo);\n\t\t};\n\n\t\tvm.saveEdits = function (todo, event) {\n\t\t\t// Blur events are automatically triggered after the form submit event.\n\t\t\t// This does some unfortunate logic handling to prevent saving twice.\n\t\t\tif (event === 'blur' && vm.saveEvent === 'submit') {\n\t\t\t\tvm.saveEvent = null;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvm.saveEvent = event;\n\n\t\t\tif (vm.reverted) {\n\t\t\t\t// Todo edits were reverted-- don't save.\n\t\t\t\tvm.reverted = null;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttodo.title = todo.title.trim();\n\n\t\t\ttodoApi[todo.title ? 'put' : 'delete'](todo)\n\t\t\t\t.then(function success() {}, function error() {\n\t\t\t\t\ttodo.title = vm.originalTodo.title;\n\t\t\t\t})\n\t\t\t\t.finally(function () {\n\t\t\t\t\tvm.editedTodo = null;\n\t\t\t\t});\n\t\t};\n\n\t\tvm.revertEdits = function (todo) {\n\t\t\ttodos[todos.indexOf(todo)] = vm.originalTodo;\n\t\t\tvm.editedTodo = null;\n\t\t\tvm.originalTodo = null;\n\t\t\tvm.reverted = true;\n\t\t};\n\n\t\tvm.removeTodo = function (todo) {\n\t\t\ttodoApi.delete(todo);\n\t\t};\n\n\t\tvm.saveTodo = function (todo) {\n\t\t\ttodoApi.put(todo);\n\t\t};\n\n\t\tvm.toggleCompleted = function (todo, completed) {\n\t\t\tif (angular.isDefined(completed)) {\n\t\t\t\ttodo.completed = completed;\n\t\t\t}\n\t\t\ttodoApi.put(todo, todos.indexOf(todo))\n\t\t\t\t.then(function success() {}, function error() {\n\t\t\t\t\ttodo.completed = !todo.completed;\n\t\t\t\t});\n\t\t};\n\n\t\tvm.clearCompletedTodos = function () {\n\t\t\ttodoApi.clearCompleted();\n\t\t};\n\n\t\tvm.markAll = function (completed) {\n\t\t\ttodos.forEach(function (todo) {\n\t\t\t\tif (todo.completed !== completed) {\n\t\t\t\t\tvm.toggleCompleted(todo, completed);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t}\n})();\n\n(function() {\n  'use strict';\n\n  angular\n  .module('wizweekPy')\n  .service('GAuth', GAuth);\n\n  /** @ngInject */\n  function GAuth(GApi, $q) {\n    var config;\n    var cachedAuth2 = null;\n    var initialized = false;\n\n    var service = {\n      setConfig: setConfig,\n      checkAuth: checkAuth,\n      signIn: signIn,\n      signOut: signOut\n    };\n    return service;\n\n    // Takes an object like this:\n    // {\n    //   clientId: 'xyz.apps.googleusercontent.com',\n    //   scope: 'https://www.googleapis.com/auth/calendar',\n    //   currentUserListener: function(currentUser) { ... }\n    // }\n    function setConfig(conf) {\n      config = conf;\n    }\n\n    function signIn() {\n      return init().then(function(auth2) {\n        return auth2.getAuthInstance().signIn();\n      });\n    }\n\n    function signOut() {\n      return init().then(function(auth2) {\n        return auth2.getAuthInstance().signOut();\n      });\n    }\n\n    function checkAuth() {\n      // init() checks the authentiation but by just calling it (but not\n      // returning it) we avoid exposing promise that would return the auth2 instance.\n      init();\n    }\n\n    function init() {\n      if (initialized) {\n        return get();\n      } else {\n        return get().then(function(auth2) {\n          auth2.init({ client_id: config.clientId, scope: config.scope });\n          auth2.getAuthInstance().currentUser.listen(config.currentUserListener);\n          initialized = true;\n          return auth2;\n        });\n      }\n    }\n\n    function get() {\n      if (cachedAuth2) {\n        return $q.resolve(cachedAuth2);\n      } else {\n        return GApi.get().then(function(gapi) {\n          cachedAuth2 = gapi.auth2;\n          return gapi.auth2;\n        });\n      }\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n  .module('wizweekPy')\n  .service('GApi', GApi);\n\n  /** @ngInject */\n  function GApi($q, $document, $window, $timeout) {\n    var gapiLoaded = false;\n    var gapiLoading = false;\n    var observerCallbacks = [];\n\n    this.get = get;\n    this.request = request;\n    this.batch = batch;\n\n    function batch(requests) {\n      if (requests.length == 0) {\n        return $q.resolve();\n      }\n\n      return get().then(function(gapi) {\n        var batch = gapi.client.newBatch();\n        requests.forEach(function(req) {\n          batch.add(gapi.client.request(req));\n        })\n        return batch;\n      });\n    }\n\n    function request(args) {\n      return get().then(function(gapi) {\n        return gapi.client.request(args);\n      });\n    }\n\n    function get() {\n      if (gapiLoaded) {\n        return $q.when($window.gapi);\n      } else {\n        var deferred = $q.defer();\n        observerCallbacks.push(deferred);\n        if (!gapiLoading) {\n          gapiLoading = true;\n          loadWithClientAndAuth().then(function(gapi) {\n            gapiLoaded = true;\n            gapiLoading = false;\n            observerCallbacks.forEach(function(c) { c.resolve(gapi); });\n          });\n        }\n        return deferred.promise;\n      }\n    }\n\n    function loadWithClientAndAuth() {\n      var deferred = $q.defer();\n      loadScript().then(function(gapi) {\n        gapi.load('client:auth2', function() {\n          deferred.resolve(gapi);\n        });\n      });\n      return deferred.promise;\n    }\n\n    function loadScript() {\n      var URL = 'https://apis.google.com/js/api.js?onload=_gapiOnLoad';\n\n      var deferred = $q.defer();\n      $window._gapiOnLoad = function(){\n        deferred.resolve($window.gapi);\n      }\n      var script = $document[0].createElement('script');\n      script.onerror = function (e) {\n        $timeout(function () {\n          deferred.reject(e);\n        });\n      };\n      script.src = URL;\n      $document[0].body.appendChild(script);\n      return deferred.promise;\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n  .module('wizweekPy')\n  .run(runBlock);\n\n  /** @ngInject */\n  function runBlock(auth, apiPing) {\n    auth.checkAuth();\n\n    // Just ping the API to wake it up (it runs on a free Heroku dyno)\n    apiPing.ping();\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('wizweekPy')\n    .config(routerConfig);\n\n  /** @ngInject */\n  function routerConfig($stateProvider, $urlRouterProvider) {\n    $stateProvider\n    .state('main',  {\n      abstract: true,\n      templateUrl: 'app/layout/main.html',\n      controller: 'MainController',\n      controllerAs: 'main'\n    })\n    .state('main.authorized', {\n      abstract: true,\n      templateUrl: 'app/layout/authorized.html',\n      controller: 'AuthorizedController',\n      controllerAs: 'authorized'\n    })\n    .state('main.authorized.dashboard', {\n      url: '/',\n      templateUrl: 'app/dashboard/dashboard.html',\n      controller: 'TodoController',\n      controllerAs: 'dash'\n    })\n    .state('main.authorized.settings', {\n      url: '/settings',\n      templateUrl: 'app/settings/settings.html',\n      controller: 'SettingsController',\n      controllerAs: '$ctrl'\n    })\n\n    $urlRouterProvider.otherwise('/');\n  }\n\n})();\n\n/* global malarkey:false, moment:false */\n(function() {\n  'use strict';\n\n  angular\n    .module('wizweekPy')\n    .constant('malarkey', malarkey)\n    .constant('moment', moment)\n    .constant('gapiScopes', 'https://www.googleapis.com/auth/calendar')\n    .constant('gapiClientId', '562801966668-qu83ib47l7bqcddpvd7qtkescdohg4e7.apps.googleusercontent.com')\n    .constant('apiBaseUrl', 'https://wizweek-api.herokuapp.com/')\n    .constant('optimizeUrl', 'https://schedule-tasks.herokuapp.com/')\n    //.constant('apiBaseUrl', 'http://localhost:8000/')\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('wizweekPy')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider, toastrConfig) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n\n    // Set options third-party lib\n    toastrConfig.allowHtml = true;\n    toastrConfig.timeOut = 1000;\n    toastrConfig.positionClass = 'toast-top-right';\n    toastrConfig.preventDuplicates = false;\n    toastrConfig.progressBar = false;\n    toastrConfig.preventOpenDuplicates = true;\n    toastrConfig.maxOpened = 1;\n  }\n\n})();\n\nangular.module(\"wizweekTemplates\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/dashboard/dashboard.html\",\"<div class=row><div class=col-md-5><h3>Tasks</h3></div></div>Enter and update your tasks below, and then when you\\'re ready to have WizWeek create an optimized schedule for you, click the button below. The schedule will automatically synced to your tasks calendar and schedule around your appointments calendar as you configured them in the settings.<br><br><div ng-show=\\\"!dash.settingsLoading && (!dash.settings.tasksCalId || !dash.settings.appointmentsCalId)\\\"><i>Before you can have WizWeek create an optimized schedule for these tasks, go to the <a ui-sref=main.authorized.settings>settings</a> to specify your appointments and tasks calendars and optionally customize your schedule.</i></div><div><button class=\\\"btn btn-success btn-lg\\\" ng-click=dash.optimize() ng-disabled=\\\"!dash.settings.tasksCalId || !dash.settings.appointmentsCalId || dash.optimizing\\\">Optimize my schedule!</button><div class=optimize-message>{{dash.optimizeMessage}}</div></div><br><br><section id=todoapp><header id=header><div class=\\\"row todo-headers\\\"><div class=\\\"first-todo-header col-md-5\\\">Task</div><div class=\\\"col-md-1 right-align\\\">Duration</div><div class=\\\"col-md-1 right-align\\\">Value</div><div class=col-md-2>Deadline</div><div class=col-md-2>Min start</div></div><form id=todo-form ng-submit=dash.addTodo()><div class=row><div class=col-md-5><input id=title class=\\\"new-todo first-field\\\" placeholder=\\\"Project or task name?\\\" ng-model=dash.newTodo.title ng-disabled=saving autofocus></div><div class=col-md-1><input class=\\\"new-todo right-align\\\" placeholder=Hours ng-model=dash.newTodo.hours ng-disabled=saving></div><div class=col-md-1><input class=\\\"new-todo right-align\\\" placeholder=Points ng-model=dash.newTodo.value ng-disabled=saving></div><div class=col-md-2><input type=text class=new-todo uib-datepicker-popup=shortDate ng-model=dash.newTodo.deadline close-text=Close is-open=dash.deadlinePopupOpen on-open-focus=false placeholder=(Optional) ng-focus=dash.deadlineFocused()></div><div class=col-md-2><input type=text class=new-todo uib-datepicker-popup=shortDate ng-model=dash.newTodo.minStart close-text=Close is-open=dash.minStartPopupOpen on-open-focus=false placeholder=(Optional) ng-focus=dash.minStartFocused()></div><div class=col-md-1><input class=\\\"todo-save-btn btn btn-default\\\" type=submit class=\\\"btn btn-success\\\" value=Save></div></div></form></header><section id=main ng-show=dash.todos.length ng-cloak><input id=toggle-all type=checkbox ng-model=dash.allChecked ng-click=dash.markAll(allChecked)><ul id=todo-list><li ng-repeat=\\\"todo in dash.todos track by $index\\\" ng-class=\\\"{completed: todo.completed, editing: todo == dash.editedTodo}\\\"><div class=view><div class=row><div class=col-md-5><input class=toggle type=checkbox ng-model=todo.completed ng-change=dash.toggleCompleted(todo)><label class=first-label ng-click=dash.editTodo(todo)>{{todo.title}}</label></div><div class=col-md-1><label class=right-align ng-click=dash.editTodo(todo)>{{todo.hours}}h</label></div><div class=col-md-1><label class=right-align ng-click=dash.editTodo(todo)>{{todo.value}}p</label></div><div class=col-md-2><label ng-click=dash.editTodo(todo)>{{todo.deadline | date:\\'shortDate\\'}}</label></div><div class=col-md-2><label ng-click=dash.editTodo(todo)>{{todo.minStart | date:\\'shortDate\\'}}</label></div><button class=destroy ng-click=dash.removeTodo(todo)></button></div></div><form ng-submit=\\\"dash.saveEdits(todo, \\'submit\\')\\\"><div class=row><div class=col-md-5><input class=\\\"edit first-field\\\" ng-trim=false ng-model=todo.title todo-focus=\\\"todo == dash.editedTodo\\\"></div><div class=col-md-1><input class=edit placeholder=Hours ng-model=todo.hours></div><div class=col-md-1><input class=edit placeholder=Points ng-model=todo.value></div><div class=col-md-2><input type=text class=edit uib-datepicker-popup=shortDate ng-model=todo.deadline></div><div class=col-md-2><input type=text class=edit uib-datepicker-popup=shortDate ng-model=todo.minStart></div><div class=col-md-1><input class=\\\"edit todo-save-btn btn btn-default\\\" type=submit value=Save></div></div></form></li></ul></section></section>\");\n$templateCache.put(\"app/footer/footer.html\",\"<div class=container><div class=row><div class=col-md-12><p>&copy; 2015 David Raffensperger. <a href=https://github.com/draffensperger/wizweek-web>Source code.</a></p></div></div></div>\");\n$templateCache.put(\"app/layout/authorized.html\",\"<div ng-cloak ng-show=\\\"!authorized.auth.signedIn && !authorized.lastSignIn.isLikelyActive()\\\"><ww-welcome></ww-welcome></div><div ng-show=\\\"!authorized.auth.signedIn && authorized.lastSignIn.isLikelyActive()\\\"><span us-spinner=\\\"{radius:30, width:8, length: 16}\\\"></span></div><div class=\\\"container main-content\\\" ng-if=authorized.auth.signedIn><div class=row><div class=col-md-12><div ui-view></div></div></div></div>\");\n$templateCache.put(\"app/layout/main.html\",\"<article><ww-navbar></ww-navbar><div ui-view></div></article><footer class=page-footer><ww-footer></ww-footer></footer>\");\n$templateCache.put(\"app/navbar/navbar.html\",\"<nav class=\\\"navbar navbar-default navbar-fixed-top\\\"><div class=container><div class=navbar-header><button type=button class=\\\"navbar-toggle collapsed\\\" data-toggle=collapse data-target=#navbar aria-expanded=false aria-controls=navbar><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=\\\"nav navbar-brand\\\" ui-sref=home><div class=wizweek-brand>WizWeek</div></a></div><div id=navbar class=\\\"navbar-collapse collapse\\\"><ul class=\\\"nav navbar-nav\\\" ng-show=navbar.auth.signedIn><li ng-class=\\\"{ active: navbar.isActive(\\'main.authorized.dashboard\\')}\\\"><a ui-sref=main.authorized.dashboard>Tasks</a></li><li ng-class=\\\"{ active: navbar.isActive(\\'main.authorized.settings\\')}\\\"><a ui-sref=main.authorized.settings>Settings</a></li></ul><form class=\\\"navbar-text navbar-form navbar-right\\\"><div ng-show=navbar.auth.signedIn>{{navbar.auth.userEmail}} <a ng-click=navbar.auth.signOut() href=\\\"\\\">Log out</a></div><div ng-show=\\\"!navbar.auth.signedIn && !navbar.lastSignIn.isLikelyActive()\\\"><a ng-click=navbar.auth.signIn() href=\\\"\\\">Login with Google</a></div></form></div><!--/.navbar-collapse --></div></nav>\");\n$templateCache.put(\"app/settings/settings.html\",\"<div class=row><div class=col-md-5><h3>Settings</h3></div></div><div class=row><div class=col-md-5><h4 class=settings-sub-header>Calendars</h4></div></div><div class=row><div class=col-md-5><div class=form-group><label for=appointments-cal class=settings-cal-label>Appointments calendar</label><select id=appointments-cal class=form-control ng-options=\\\"cal.id as cal.summary for cal in $ctrl.calendars\\\" ng-model=$ctrl.settings.appointmentsCalId ng-change=$ctrl.saveSettings()></select>WizWeek will treat events on this calendar as fixed meetings and will schedule your project tasks around them.<br><br>If you have multiple calendars that contain appointments of yours, we recommend copying appointments from the other calendar to your main.</div></div><div class=col-md-5><div class=form-group><label for=tasks-cal class=settings-cal-label>Tasks calendar (will be overwritten)</label><select id=tasks-cal class=form-control ng-options=\\\"cal.id as cal.summary for cal in $ctrl.calendars\\\" ng-model=$ctrl.settings.tasksCalId ng-change=$ctrl.saveSettings()></select>WizWeek will <b>overwrite future events</b> on this calendar and replace them with automatically scheduled project work tasks.<br><br>We recommend you create a new calendar for your scheduled tasks (and then come back and refresh this page to select it).</div></div></div><div class=row><div class=col-md-5><h4 class=settings-sub-header>Work Schedule</h4>WizWeek will schedule your project tasks within your work hours, except when you have an event in your appointments calendar. If you want to exclude a day from your work schedule, just set the start and end time to the same time (weekends are 9am-9am by default).</div></div><div class=row><div class=col-md-1><h5>Day</h5></div><div class=col-md-2><h5>Start</h5></div><div class=col-md-2><h5>End</h5></div></div><div class=row ng-repeat=\\\"day in $ctrl.weekDays\\\"><div class=col-md-1>{{day}}</div><div class=col-md-2><div uib-timepicker hour-step=1 minute-step=1 show-spinners=false mousewheel=false pad-hours=false ng-model-options=\\\"{ debounce:800 }\\\" ng-change=$ctrl.saveSettings() ng-model=$ctrl.settings.workStartTimes[$index]></div></div><div class=col-md-2><div uib-timepicker hour-step=1 minute-step=1 show-spinners=false mousewheel=false pad-hours=false ng-model-options=\\\"{ debounce:800 }\\\" ng-change=$ctrl.saveSettings() ng-model=$ctrl.settings.workEndTimes[$index]></div></div></div>\");\n$templateCache.put(\"app/welcome/welcome.html\",\"<!-- Main jumbotron for a primary marketing message or call to action --><div class=jumbotron><div class=container><h1>Want to optimize your week?</h1><p>WizWeek helps you effectively plan your week based on your to-do list and appointments.</p><p>You define tasks with deadlines, estimates and business value - and WizWeek jump starts your schedule.</p><p><a class=\\\"btn btn-primary btn-lg\\\" role=button ng-click=welcome.auth.signIn()>Sign in with Google to get started &raquo;</a></p></div></div><div class=container><!-- Example row of columns --><div class=row><div class=col-md-6><h2>Clarify your priorities</h2><blockquote><p>&ldquo;What do you do the last week before you leave on a big trip? You clean up, close up, clarify, and renegotiate all your agreements with yourself and others. I just suggest that you do this weekly instead of yearly.&rdquo;</p><footer>David Allen of <cite title=\\\"Getting Things Done\\\">Getting Things Done</cite></footer></blockquote></div><div class=col-md-6><h2>Schedule your work</h2><blockquote><p>&ldquo;Just as there is only so much stuff we can fit into our closets, so also there is only so much stuff we can fit into our days. If we don\\'t think in terms of a basic schedule ... we end up in overload.&rdquo;</p><footer>Matt Perman of <cite title=\\\"What\\'s Best Next\\\">What\\'s Best Next</cite></footer></blockquote></div></div></div><!-- /container -->\");}]);"],"sourceRoot":"/source/"}